<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OVER-SAVE - Reset Password</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/auth.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <!-- Header -->
            <div class="auth-header">
                <div class="logo">
                    <span class="logo-icon">üí∞</span>
                    <span class="logo-text">OVER-SAVE</span>
                </div>
                <h2>Set New Password</h2>
                <p>Choose a strong password for your account.</p>
            </div>

            <!-- Loading State -->
            <div id="loading-container" class="loading-container">
                <div class="spinner"></div>
                <p>Validating reset link...</p>
            </div>

            <!-- Error State -->
            <div id="error-container" class="error-container" style="display: none;">
                <div class="error-icon">‚ö†Ô∏è</div>
                <h3>Invalid or Expired Link</h3>
                <p id="error-message">This password reset link is invalid or has expired.</p>
                <a href="forgot-password.html" class="btn btn-primary">Request New Reset Link</a>
            </div>

            <!-- Reset Form -->
            <div id="form-container" style="display: none;">
                <!-- Success/Error Messages -->
                <div id="message-container" style="display: none;">
                    <div id="message" class="message"></div>
                </div>

                <!-- Reset Password Form -->
                <form id="resetPasswordForm" class="auth-form">
                    <div class="form-group">
                        <label for="password" class="form-label">New Password</label>
                        <div class="password-input-container">
                            <input
                                type="password"
                                id="password"
                                name="password"
                                class="form-input"
                                placeholder="Enter your new password"
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword('password')">
                                <span class="toggle-show">üëÅÔ∏è</span>
                                <span class="toggle-hide" style="display: none;">üôà</span>
                            </button>
                        </div>
                        <div id="passwordError" class="error-message"></div>
                        <div id="passwordStrength" class="password-strength" style="display: none;"></div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <div class="password-input-container">
                            <input
                                type="password"
                                id="confirmPassword"
                                name="confirmPassword"
                                class="form-input"
                                placeholder="Confirm your new password"
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
                                <span class="toggle-show">üëÅÔ∏è</span>
                                <span class="toggle-hide" style="display: none;">üôà</span>
                            </button>
                        </div>
                        <div id="confirmPasswordError" class="error-message"></div>
                    </div>

                    <!-- Password Requirements -->
                    <div class="password-requirements">
                        <h4>Password Requirements:</h4>
                        <ul>
                            <li id="req-length">At least 12 characters long</li>
                            <li id="req-uppercase">One uppercase letter</li>
                            <li id="req-number">One number</li>
                            <li id="req-special">One special character</li>
                        </ul>
                    </div>

                    <button type="submit" id="resetBtn" class="btn btn-primary btn-full">
                        <span class="btn-text">Reset Password</span>
                        <span class="btn-loading" style="display: none;">
                            <span class="spinner"></span>
                            Resetting...
                        </span>
                    </button>
                </form>

                <!-- Back to Login -->
                <div class="auth-footer">
                    <p>Remember your password? <a href="login.html" class="auth-link">Back to Login</a></p>
                </div>
            </div>

            <!-- Success State -->
            <div id="success-container" class="success-container" style="display: none;">
                <div class="success-icon">‚úÖ</div>
                <h3>Password Reset Successful!</h3>
                <p>Your password has been successfully updated. You can now log in with your new password.</p>
                <a href="login.html" class="btn btn-primary">Go to Login</a>
                <div class="security-note">
                    <p><strong>üîí Security Note:</strong> All your existing sessions have been logged out for security. You'll need to log in again.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="js/reset-password.js"></script>
</body>
</html>